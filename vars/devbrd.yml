cluster:
  name: brd
env:
  name: dev
vpc:
  state: present
  region: us-west-2
  cidr_block: 10.200.0.0/16
  subnets:
    - cidr: 10.200.1.0/24
      az: us-west-2c
      resource_tags: { "Name": "{{ env.name }}{{ cluster.name }}" }
    - cidr: 10.200.2.0/24
      az: us-west-2b
      resource_tags: { "Name": "{{ env.name }}{{ cluster.name }}" }
  route_tables:
    - subnets:
        - 10.200.1.0/24
        - 10.200.2.0/24
      routes:
        - dest: 0.0.0.0/0
          gw: igw
security_group:
  - name: ssh
    port: 22
    proto: tcp
    cidr_ip: "{{ vpc.cidr_block }}"
  - name: http
    port: 80
    proto: tcp
    cidr_ip: "{{ vpc.cidr_block }}"
  - name: https
    port: 443
    proto: tcp
    cidr_ip: "{{ vpc.cidr_block }}"
  - name: mysql
    port: 3306
    proto: tcp
    cidr_ip: "{{ vpc.cidr_block }}"
  - name: redis
    port: 6379
    proto: tcp
    cidr_ip: "{{ vpc.cidr_block }}"
redis:
  state: present
  node_type: cache.t2.micro
  num_nodes: 1
rds:
  state: present
  db_engine: MySQL
  size: 10
  instance_type: 'db.t2.micro'
  username: mysqlroot
  password: SuperStrongPassword
create_db:
  mysql:
    user: mysqluser
    password: mysqlpassword
create_ec2_key:
  - name: 'knife-west2'
    key_material: 'knife-west2.pub'
    state: present
#ec2:
#  key_name: "{{ create_ec2_key.name }}"
#  instance_type: 't2.nano'
#  source_ami: 'ami-7172b611'
#
name: "{{ env.name }}{{ cluster.name }}"
jump:
  state: present
  key_name: "{{ create_ec2_key.name }}"
  instance_type: 't2.nano'
  source_ami: 'ami-7172b611'
#
flocker:
  security_group:
    - name: flocker4523
      port: 4523
      proto: tcp
      cidr_ip: "{{ vpc.cidr_block }}"
    - name: flocker4524
      port: 4524
      proto: tcp
      cidr_ip: "{{ vpc.cidr_block }}"
