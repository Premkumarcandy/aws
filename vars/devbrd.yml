cluster:
  name: brd
env:
  name: dev
vpc:
  state: present
  region: us-west-2
  cidr_block: 10.200.0.0/16
  subnets:
    - cidr: 10.200.1.0/24
      az: us-west-2c
      resource_tags: { "Name": "{{ env.name }}{{ cluster.name }}" }
    - cidr: 10.200.2.0/24
      az: us-west-2b
      resource_tags: { "Name": "{{ env.name }}{{ cluster.name }}" }
    - cidr: 10.200.3.0/24
      az: us-west-2c
      resource_tags: { "Name": "{{ env.name }}{{ cluster.name }}priv" }
    - cidr: 10.200.4.0/24
      az: us-west-2b
      resource_tags: { "Name": "{{ env.name }}{{ cluster.name }}priv" }
  route_tables:
    - subnets:
        - 10.200.1.0/24
        - 10.200.2.0/24
      routes:
        - dest: 0.0.0.0/0
          gw: igw
security_group:
  - name: ssh
    port: 22
    proto: tcp
    cidr_ip: "{{ vpc.cidr_block }}"
  - name: http
    port: 80
    proto: tcp
    cidr_ip: "{{ vpc.cidr_block }}"
  - name: https
    port: 443
    proto: tcp
    cidr_ip: "{{ vpc.cidr_block }}"
  - name: mysql
    port: 3306
    proto: tcp
    cidr_ip: "{{ vpc.cidr_block }}"
  - name: redis
    port: 6379
    proto: tcp
    cidr_ip: "{{ vpc.cidr_block }}"
redis:
  state: present
  node_type: cache.t2.micro
  num_nodes: 1
rds:
  state: present
  db_engine: MySQL
  size: 10
  instance_type: 'db.t2.micro'
  username: mysqlroot
  password: SuperStrongPassword
create_db:
  mysql:
    user: mysqluser
    password: mysqlpassword
ec2_keys:
  - name: 'knife-west2'
    key_material: 'ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC5XHa3KEFt14QCGL6zCir8AimIwQbo/4SG0gsFnEtWrIq83nMKGXmGPt0PzPrWEyvVg1d3DwA/nH/cZq9OXCA8gpCgZEvZirbZ+VgjlFgIyMynLpYz/7CkXY3eutiwZ/sqi7H7f3DOmvRnPUszTKUx8QOCb2lL7/o7ZTGOmTnplRy2XtkcgNhqhZmWnY62XgHryFZ8L4ZkJX/km+EjeT5dBs46wpvSK3DoZSFYYhdMeXhKWUzM9lliSQJ+8EQ4/w1k+PhLwN3FdfKplDvzHKpeNfSPaVIfKfUHJl/RhvAMTEIkQmaFMI3ViYmBupJ/8GbWoBEIC3Aksk6VMRjPif57 rz@MRMIOMP1444'
    state: present
#ec2:
#  key_name: "{{ create_ec2_key.name }}"
#  instance_type: 't2.nano'
#  source_ami: 'ami-7172b611'
#
elb:
  state: present
  name: "{{ env.name }}{{ cluster.name }}elb"
  scheme: 'internet-facing'
  cross_az_load_balancing: yes
  #
web:
  image: 'ami-7172b611'
  instance_type: 't2.nano'
  key_name: "{{ ec2_keys[0].name }}"
#
name: "{{ env.name }}{{ cluster.name }}"
jump:
  state: present
  key_name: "{{ create_ec2_key.name }}"
  instance_type: 't2.nano'
  source_ami: 'ami-7172b611'
#
flocker:
  security_group:
    - name: flocker4523
      port: 4523
      proto: tcp
      cidr_ip: "{{ vpc.cidr_block }}"
    - name: flocker4524
      port: 4524
      proto: tcp
      cidr_ip: "{{ vpc.cidr_block }}"
